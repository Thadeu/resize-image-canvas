{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f73a2cd37472e2faa1b0","webpack:///./src/index.js","webpack:///./src/FileResize.js","webpack:///./src/DrawImage.js"],"names":["FileResize","boxPreview","files","width","height","loading","call","boxImage","document","createElement","classList","add","innerHTML","appendChild","Array","from","map","file","index","reader","FileReader","sourceImage","Image","targetImage","createBoxPreview","onload","e","src","target","result","maxWidth","maxHeight","toDataURL","readAsDataURL","DrawImage","imageWidth","imageHeight","canvas","getDimensions","bind","context","getContext","imageSmoothingQuality","drawImage"],"mappings":"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","file":"resize-image-canvas.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"resize-image-canvas\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"resize-image-canvas\"] = factory();\n\telse\n\t\troot[\"resize-image-canvas\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f73a2cd37472e2faa1b0","import { FileResize } from 'FileResize'\n\nexport default FileResize\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import { DrawImage } from './DrawImage'\n\nexport class FileResize {\n\n  constructor({ boxPreview, files, width, height, loading }) {\n    this.boxPreview = boxPreview\n    this.files = files\n    this.width = width\n    this.height = height\n    this.loading = loading || 'carregando...'\n\n    this.call()\n  }\n\n  createBoxPreview() {\n    let boxImage = document.createElement('div')\n\n    boxImage.classList.add('box-image')\n    boxImage.innerHTML = this.loading\n    this.boxPreview.appendChild(boxImage)\n\n    return this.boxPreview\n  }\n\n  call() {\n    Array.from(this.files).map((file, index) => {\n      if (file) {\n        let reader = new FileReader()\n        let sourceImage = new Image()\n        let targetImage = new Image()\n\n        const boxPreview = this.createBoxPreview()\n\n        reader.onload = (e) => {\n          /**\n           * sourceImage\n           */\n          sourceImage.src = e.target.result\n\n          // load da imagem\n          sourceImage.onload = () => {\n            // pega o base64 do canvas com a imagem dentro\n            // sourceImage, maxWidth, maxHeight\n            targetImage.src = new DrawImage({\n              sourceImage,\n              maxWidth: this.width,\n              maxHeight: this.height\n            }).toDataURL()\n\n            // joga a imagem dentro do box de previews redimensionadas\n            boxPreview.innerHTML = ''\n            boxPreview.appendChild(targetImage)\n          }\n        }\n\n        reader.readAsDataURL(file)\n      }\n    })\n  }\n}\n// end\n\n\n\n// WEBPACK FOOTER //\n// ./src/FileResize.js","export class DrawImage {\n\n  constructor({ sourceImage, maxWidth, maxHeight }) {\n    this.sourceImage = sourceImage\n    this.maxWidth = maxWidth\n    this.maxHeight = maxHeight\n    this.imageWidth = this.sourceImage.width\n    this.imageHeight = this.sourceImage.height\n    this.canvas = document.createElement('canvas')\n\n    this.getDimensions = this.getDimensions.bind(this)\n  }\n\n  toDataURL() {\n    const context = this.canvas.getContext('2d')\n\n    // tamanho do canvas\n    this.canvas.width = this.getDimensions().width\n    this.canvas.height = this.getDimensions().height\n\n    // contexto do canvas\n    context.imageSmoothingQuality = 'high'\n    context.drawImage(this.sourceImage, 0, 0, this.getDimensions().width, this.getDimensions().height)\n\n    return this.canvas.toDataURL()\n  }\n\n  getDimensions() {\n    // WideScreen 4:3\n    // w:1920 X h:1080\n    if (this.imageWidth > this.imageHeight) {\n      // largura maior do que eu gostaria\n      if (this.imageWidth > this.maxWidth) {\n        /**\n         * e.g:\n         * 1080 * (50 / 1920) -> 28.12\n         */\n        this.imageHeight *= this.maxWidth / this.imageWidth\n        this.imageWidth = this.maxWidth\n      }\n    } else {\n      // Imagem mais alta do que larga\n      if (this.imageHeight > this.maxHeight) {\n        this.imageWidth *= (this.maxHeight / this.imageHeight)\n        this.imageHeight = this.maxHeight\n      }\n    }\n\n    return {\n      width: this.imageWidth,\n      height: this.imageHeight\n    }\n  } // getDimensions\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/DrawImage.js"],"sourceRoot":""}